<!doctype html><html><head><meta charset="utf-8"><title>Trend – Podcast</title></head>
<body>
<h1>Trend – Podcast ({{ report_date or "brak daty" }})</h1>

<!-- Streszczenie -->
<p><strong>Łącznie: {{ counts.all }} | Long‑form: {{ counts.long }} | Shorts: {{ counts.shorts }}</strong></p>

<!-- Sortowanie -->
{% set long_items_sorted = (long_items | sort(attribute='views_today', reverse=True)) %}
{% set short_items_sorted = (short_items | sort(attribute='views_today', reverse=True)) %}

<style>
  table{border-collapse:collapse;width:100%;font-family:system-ui,Arial,sans-serif}
  th,td{border:1px solid #e5e7eb;padding:12px;text-align:left}
  th{position:sticky;top:0;background:#f8fafc;font-weight:600}
  tbody tr:nth-child(odd){background:#fafafa}
  tbody tr:hover{background:#f1f5f9}
  .muted{color:#6b7280}
  a{color:#0b57d0;text-decoration:none}
  a:hover{text-decoration:underline}
</style>

<h2>Top dzienne przyrosty (Long-form)</h2>

{% if long_items_sorted and long_items_sorted|length > 0 %}
<table>
  <thead>
    <tr>
      <th>#</th>
      <th>Tytuł</th>
      <th>Kanał</th>
      <th>Dzisiejsze</th>
      <th>Wczoraj</th>
      <th>Δ</th>
    </tr>
  </thead>
  <tbody>
    {% for row in long_items_sorted[:50] %}
      <tr>
        <td>{{ loop.index }}</td>
        <td>
          <a href="https://www.youtube.com/watch?v={{ row.video_id }}" target="_blank" rel="noopener">
            {{ row.title }}
          </a>
        </td>
        <td>{{ row.channel_title | default('-') }}</td>
        <td>{{ row.views_today | default('-') }}</td>
        <td>{{ row.views_yesterday | default('-') }}</td>
        <td>{{ row.delta | default('-') }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
  <p class="muted">Brak danych Long-form do wyświetlenia.</p>
{% endif %}

<h2 style="margin-top:24px;">Top dzienne przyrosty (Shorts)</h2>

{% if short_items_sorted and short_items_sorted|length > 0 %}
<table>
  <thead>
    <tr>
      <th>#</th>
      <th>Tytuł</th>
      <th>Kanał</th>
      <th>Dzisiejsze</th>
      <th>Wczoraj</th>
      <th>Δ</th>
    </tr>
  </thead>
  <tbody>
    {% for row in short_items_sorted[:50] %}
      <tr>
        <td>{{ loop.index }}</td>
        <td>
          <a href="https://www.youtube.com/watch?v={{ row.video_id }}" target="_blank" rel="noopener">
            {{ row.title }}
          </a>
        </td>
        <td>{{ row.channel_title | default('-') }}</td>
        <td>{{ row.views_today | default('-') }}</td>
        <td>{{ row.views_yesterday | default('-') }}</td>
        <td>{{ row.delta | default('-') }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
  <p class="muted">Brak danych Shorts do wyświetlenia.</p>
{% endif %}

<h3>Popularne godziny publikacji</h3>
<p><strong>Long-form – top godzina:</strong> {{ stats.longform_top_hour | default('brak') }}</p>
<p><strong>Shorts – top godzina:</strong> {{ stats.shorts_top_hour | default('brak') }}</p>
</body></html>
